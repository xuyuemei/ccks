# 📘 ValueAlignment Dataset 说明文档

## 📂 数据集概览

本项目提供多个基于 **中国社会主义核心价值观** 构建的价值观对齐（Value Alignment）数据集，适用于 **大模型的价值观微调与对齐研究**。

---

## 🧩 1. ValueAlignment-Dataset-Alpaca-zh

* **格式**：Alpaca 格式（中文）
* **规模**：共 **72,000 条数据**
* **结构说明**：

  * 每 **6,000 条数据** 对应一个价值观维度（如 *自由*、*平等* 等）
  * 每条数据包含以下 4 个字段：

    * **instruction**
    * **input**：根据某个价值观维度构造的道德困境

      * 包含两个选项：一个支持该维度、一个违背该维度
    * **output**：针对两个选项分别提供理由与解释
    * **system**

---

## 🌏 2. ValueAlignment-Dataset-Alpaca-en

* **格式**：Alpaca 格式（英文）
* **内容**：与中文版本 (`ValueAlignment-Dataset-Alpaca-zh`) 一致，仅语言不同

---

## ⚖️ 3. ValueAlignment-Dataset-DPO

* **格式**：DPO（Direct Preference Optimization）偏好格式
* **规模**：共 **72,000 条数据**
* **结构说明**：

  * 每 **6,000 条数据** 对应一个价值观维度
  * 每条数据包含以下 5 个字段：

    * **instruction**：包含基于某个价值观维度构造的道德困境，并提供两个选项（支持与违背）
    * **input**
    * **chosen**：选择支持该价值观维度的选项的理由与解释
    * **rejected**：选择违背该价值观维度的选项的理由与解释
    * **system**

---

## 🔍 4. ValueAlignment-Embadding

* **说明**：基于 K-means 方法的语义聚类结果
* **内容**：

  * 共 **12 个数据集**
  * 每个数据集包含 **75 条数据**
  * 每个数据集对应 **中国社会主义核心价值观的一个维度**
* **来源**：从 `ValueAlignment-Dataset-DPO` 的 12 个数据集随机抽取

---

## 🧠 5. embdding.py

* **功能**：进行语义聚类
* **主要步骤**：

  1. 自动读取 12 个数据集的文本内容
  2. 计算语义相似度并执行 K-means 聚类
  3. 输出聚类结果，将语义上接近的价值观维度归为同一簇
  4. 最终生成 **3 个簇**

---

## 🧪 6. result

* **说明**：模型测试结果集
* **内容**：

  * 含 **2,400 条测试数据**
  * 每 **200 条数据** 对应一个价值观维度
* **评测模型**：

  * **LLaMA**
  * **Qwen**
  * **DeepSeek**

---

## 🤖 7. mask-generation.py

* **功能**：控制模型生成测试集回答
* **实现内容**：

  * 对测试集中的 2,400 条问题生成回答
  * 输出：

    * 选择 **支持价值观** 选项的比例（支持率）
    * 选择 **违背价值观** 选项的比例
    * 对两种选择的理由与解释

---

## 📈 8. acc_precent.py

* **功能**：计算模型生成的回答中支持价值观的选项的平均支持率
* **指标意义**：

  * 将平均支持率作为评估模型微调效果的重要指标

---

## 🧾 9. 数据集总结表

| 数据集名称                            | 语言 | 格式     | 数据量    | 特征说明             |
| -------------------------------- | -- | ------ | ------ | ---------------- |
| ValueAlignment-Dataset-Alpaca-zh | 中文 | Alpaca | 72,000 | 每6,000条对应一个价值观维度 |
| ValueAlignment-Dataset-Alpaca-en | 英文 | Alpaca | 72,000 | 内容与中文一致          |
| ValueAlignment-Dataset-DPO       | 中文 | DPO    | 72,000 | 偏好数据格式           |
| ValueAlignment-Embadding         | 中文 | 聚类结果   | 12×75  | 基于K-means语义聚类    |
| result                           | 中文 | 测试集    | 2,400  | 模型微调效果评估         |
